{% extends 'base.html' %}
{% block title %}Ajouter une source{% endblock %}
{% block content %}
  <style>
    .recherche-rss {
      max-width: 300px;
      margin: 0 auto;
      padding: 10px;
    }
    .recherche-rss form {
      margin-bottom: 1em;
    }
    .recherche-rss input[type="text"] {
      width: 100%;
      padding: 0.5em;
      border: 2px solid #001858;
      border-radius: 0.5em;
      font-size: 1em;
      box-sizing: border-box;
    }
    .recherche-rss button {
      width: 100%;
      padding: 0.7em;
      background: #06d6a0;
      color: white;
      border: none;
      border-radius: 0.5em;
      font-size: 1em;
      cursor: pointer;
      margin-top: 0.5em;
    }
    .recherche-rss button:hover {
      background: #05a57e;
    }
    .btn-ajouter {
      background: #06d6a0;
      color: white;
      border: none;
      padding: 0.4em 0.8em;
      border-radius: 0.5em;
      cursor: pointer;
      font-size: 0.9em;
    }
    .btn-ajouter:hover {
      background: #05a57e;
    }
    .nom-source {
      font-size: 0.9em;
      display: block;
      margin-bottom: 0.5em;
    }
  </style>
  <div class="recherche-rss">
    <h2><i class="fas fa-search"></i> Rechercher un podcast</h2>
    {% for t in searchtools %}
    <h3> {{ t }}</h3>
    <form action="{{ url_for('podcast_search') }}" method="post">
      <input type="text" name="podcast_name" placeholder="la discomobile" required>
      <input type="hidden" name="searchtool" value="{{ t }}">
      <button type="submit">Rechercher</button>
    </form>
    {% endfor %}

    {% if resultats is defined %}
      <h3>Résultats trouvés :</h3>

      {% if resultats %}
        <div class="cardlist">
          {% for r in resultats %}
            <div class="card" style="
           {% if r.image %}
             background-image: url('{{ r.image }}');
             background-size: cover;
             background-position: center;
           {% else %}
             background-color: {{ ['#FFD166','#06D6A0','#118AB2','#EF476F','#073B4C'] | random }};
           {% endif %}
         ">
              <div class="overlay">
                <span class="nom-source">{{ r.titre or "Flux RSS" }}</span><br>
                <form action="{{ url_for('add_podcast') }}" method="post">
                  <input type="hidden" name="url" value="{{ r.flux_rss }}">
                  <button type="submit" class="btn-ajouter"><i class="fas fa-plus"></i> Ajouter</button>
                </form>
              </div>
              <div> </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p>Aucun flux RSS trouvé pour ce site.</p>
      {% endif %}
    {% endif %}
  </div>
{% endblock %}
